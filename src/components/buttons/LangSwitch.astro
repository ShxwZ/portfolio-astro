---
import LangSwitcher from "./LangSwitcher.jsx";
import ButtonContainer from "./ButtonContainer.astro";
import { createAutoRouteManager } from "../../utils/routeManager";

var props = Astro.props;
const { AstroUrl } = props;

// Crear una instancia del RouteManager con contexto autom√°tico
const routeManagerInstance = await createAutoRouteManager(Astro);
const initialRouteInfo = routeManagerInstance.analyzeUrl(Astro.url);

// Preparar datos serializables para pasar al componente cliente
const routeManagerContext = routeManagerInstance.getContext();
const routeManagerConfig = routeManagerInstance.getConfig();

const routeManagerData = {
    config: routeManagerConfig,
    context: routeManagerContext,
};
---

<ButtonContainer classesInside="bg-[--bg-color] ">
    <LangSwitcher
        client:load
        initialLang={initialRouteInfo.currentLang}
        routeManagerData={routeManagerData}
    />
</ButtonContainer>
